<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .grid .two {
        opacity: 0;
        transform: translateX(500px);
        transition: opacity 1s ease, transform 1s ease;
      }
      .grid .three {
        opacity: 0;
        transform: translateX(-500px);
        transition: opacity 1s ease, transform 1s ease;
      }
      .grid .four {
        opacity: 0;
        transform: translateY(-500px);
        transition: opacity 1s ease, transform 1s ease;
      }
      img {
        width: 50%;
        height: 500px;
      }

      .grid img.animate,
      .grid p.animate {
        opacity: 1;
        transform: translate(0);
      }

      .grid p {
        opacity: 0;
        transform: translateY(-1000px);
      }

      .grid .one {
        opacity: 1;
        /* transform: translateY(0); */
        transition: opacity 1s ease, transform 1s ease;
      }
      .topAnimate {
        opacity: 0;
        transform: translateY(-1000px);
      }
    </style>
  </head>
  <body>
    <div class="grid">
      <img class="one" src="./public/assets/images/portfolio/VrAr/detail/07_ForensicScientist/hero.png" alt="" />
      <img class="two" src="./public/assets/images/portfolio/VrAr/detail/07_ForensicScientist/1.png" alt="" />
      <img class="three" src="./public/assets/images/portfolio/VrAr/detail/07_ForensicScientist/2.png" alt="" />
      <img class="four" src="./public/assets/images/portfolio/VrAr/detail/07_ForensicScientist/3.png" alt="" />
      <p>ddasklsdf</p>
      <p>
        Lorem, ipsum dolor sit amet consectetur adipisicing elit. Tempore similique illum magni officia ad quae incidunt maxime modi, quasi
        consectetur. Rem, maiores dolorum esse, temporibus fuga itaque, sint natus voluptates quam quod iste sequi debitis perspiciatis sit! Illum,
        iure cupiditate? Illum possimus totam, rem illo pariatur placeat eaque consequatur dolor accusantium vero doloremque officia saepe dolorem
        perspiciatis tenetur! Quod, perspiciatis. At aliquid accusantium neque praesentium? Repellendus atque nisi ullam, ipsa excepturi sed voluptate
        in. Consequatur corporis laboriosam animi eius, natus quasi, beatae eveniet possimus porro a dolore itaque enim consectetur eligendi! Adipisci
        fugiat, fugit commodi molestias nisi exercitationem voluptatem vel.
      </p>
    </div>
    <script>
      const elements = document.querySelectorAll('.grid img, .grid p');
      // 모든 이미지 로드 감지 후 순차적으로 애니메이션 적용

      let observer = new IntersectionObserver(
        (entries, observer) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const element = entry.target;

              if (element.tagName === 'IMG') {
                // console.log('element: ', element);
                element.onload = () => applyAnimation(element);
                if (element.complete) {
                  element.onload();
                }
              } else {
                applyAnimation(element);
              }
              observer.unobserve(element);
            }
          });
        },
        { threshold: 0.2 }
      );

      elements.forEach((el) => {
        observer.observe(el);
      });

      // function applyAnimation(elements) {
      //   elements.forEach((el, index) => {
      //     setTimeout(() => {
      //       el.classList.add('animate');
      //     }, index * 2000); // 순차적으로 500ms 간격으로 애니메이션 적용
      //   });
      // }

      function applyAnimation(element) {
        const delay = Array.from(elements).indexOf(element) * 500; // 100ms 간격으로 적용
        setTimeout(() => {
          // element.classList.add('animate');

          if (element.className === 'one') {
            element.classList.add('topAnimate');
          } else if (element.className === 'two') {
            element.classList.add('animate');
          } else {
            element.classList.add('animate');
          }
        }, delay);
      }
    </script>
  </body>
</html>
